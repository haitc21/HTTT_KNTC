<form class="form-horizontal form-label-left" skipValidation [formGroup]="form" #frmDetail>
  <p-panel #pnlDetail [collapsed]="false">
    <p-tabView styleClass="tabview-custom">
      <!-- ----------------------------------------------------------------------- -->
      <p-tabPanel>
        <ng-template pTemplate="header">
          <i class="pi pi-fw pi-envelope mr-2"></i>
          <span>Thông tin Khiếu nại</span>
        </ng-template>

        <ng-template pTemplate="content">
          <div class="formgrid grid">
            <p-accordion [multiple]="true" [activeIndex]="[0]">
              <!-- -------------------------------Thông tin khiếu nại/khiếu kiện--------------------------------------------------- -->
              <p-accordionTab header="Thông tin khiếu nại/khiếu kiện" class="w-full">
                <div class="grid">
                  <!-- -------------------------------maHoSo--------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="maHoSo"
                        formControlName="maHoSo"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="maHoSo">Mã hồ sơ <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.maHoSo"
                      [validationMessages]="validationMessages.maHoSo"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------tieuDe---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="tieuDe"
                        formControlName="tieuDe"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="tieuDe">Tiêu đề <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.tieuDe"
                      [validationMessages]="validationMessages.tieuDe"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------nguoiNopDon---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="nguoiNopDon"
                        formControlName="nguoiNopDon"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="nguoiNopDon">Người nộp đơn <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.nguoiNopDon"
                      [validationMessages]="validationMessages.nguoiNopDon"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------cccdCmnd---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="cccdCmnd"
                        formControlName="cccdCmnd"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="cccdCmnd">CCCD/CMND <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.cccdCmnd"
                      [validationMessages]="validationMessages.cccdCmnd"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ---------------------------------ngaySinh------------------------------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="ngaySinh"
                        formControlName="ngaySinh"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                        inputId="dob"
                      ></p-calendar>
                      <label>Ngày sinh <span class="required">*</span></label>
                      <app-validation-message
                        [entityControl]="formControls.ngaySinh"
                        [validationMessages]="validationMessages.ngaySinh"
                      >
                      </app-validation-message>
                    </span>
                  </div>
                  <!-- ------------------------------dienThoai---------------------------------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="dienThoai"
                        formControlName="dienThoai"
                        type="text"
                        pInputText
                        class="w-full"
                      />
                      <label for="dienThoai">Số ĐT<span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.dienThoai"
                      [validationMessages]="validationMessages.dienThoai"
                    >
                    </app-validation-message>
                  </div>
                  <!-- -----------------------------email----------------------------------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="email"
                        formControlName="email"
                        type="text"
                        pInputText
                        class="w-full"
                      />
                      <label for="email">Email</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.email"
                      [validationMessages]="validationMessages.email"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------maTinhTP---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="maTinhTP"
                        formControlName="maTinhTP"
                        [options]="tinhOptions"
                        optionLabel="unitName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="unitName"
                        styleClass="w-full"
                        (onChange)="tinhChange($event?.value, 1)"
                      ></p-dropdown>
                      <label>Tỉnh/TP <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.maTinhTP"
                      [validationMessages]="validationMessages.maTinhTP"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------maQuanHuyen---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="maQuanHuyen"
                        formControlName="maQuanHuyen"
                        [options]="huyenOptions"
                        optionLabel="unitName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="unitName"
                        styleClass="w-full"
                        (onChange)="huyenChange($event?.value, 1)"
                      ></p-dropdown>
                      <label>Quận/Huyện <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.maQuanHuyen"
                      [validationMessages]="validationMessages.maQuanHuyen"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------maXaPhuongTT---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="maXaPhuongTT"
                        formControlName="maXaPhuongTT"
                        [options]="xaOptions"
                        optionLabel="unitName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="unitName"
                        styleClass="w-full"
                      ></p-dropdown>
                      <label>Xã/Phường/TT <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.maXaPhuongTT"
                      [validationMessages]="validationMessages.maXaPhuongTT"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------diaChiThuongTru---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-12">
                    <span class="p-float-label">
                      <textarea
                        id="diaChiThuongTru"
                        formControlName="diaChiThuongTru"
                        [rows]="3"
                        pInputTextarea
                        class="w-full"
                      ></textarea>
                      <label for="diaChiThuongTru"
                        >Địa chỉ thường trú <span class="required">*</span></label
                      >
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.diaChiThuongTru"
                      [validationMessages]="validationMessages.diaChiThuongTru"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------diaChiLienHe---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-">
                    <span class="p-float-label">
                      <textarea
                        id="diaChiLienHe"
                        formControlName="diaChiLienHe"
                        [rows]="3"
                        pInputTextarea
                        class="w-full"
                      ></textarea>
                      <label for="diaChiLienHe"
                        >Địa chỉ liên hệ <span class="required">*</span></label
                      >
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.diaChiLienHe"
                      [validationMessages]="validationMessages.diaChiLienHe"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ---------------------------------thoiGianTiepNhan------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="thoiGianTiepNhan"
                        formControlName="thoiGianTiepNhan"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                        showTime="true"
                        [hourFormat]="24"
                      ></p-calendar>
                      <label>Thời gian tiếp nhận</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.thoiGianTiepNhan"
                      [validationMessages]="validationMessages.thoiGianTiepNhan"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ---------------------------------thoiGianHenTraKQ------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="thoiGianHenTraKQ"
                        formControlName="thoiGianHenTraKQ"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                        showTime="true"
                        [hourFormat]="24"
                      ></p-calendar>
                      <label>Thời gian hẹn trả kết quả</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.thoiGianHenTraKQ"
                      [validationMessages]="validationMessages.thoiGianHenTraKQ"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------noiDungVuViec---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-12">
                    <!-- <textarea
                        id="noiDungVuViec"
                        formControlName="noiDungVuViec"
                        [rows]="5"
                        pInputTextarea
                        class="w-full"
                      ></textarea> -->
                    <label>Nội dung vụ việc <span class="required">*</span></label>
                    <p-editor
                      id="noiDungVuViec"
                      formControlName="noiDungVuViec"
                      class="w-full"
                      [style]="{ height: '120px' }"
                      [readonly]="mode == 'view'"
                    ></p-editor>
                    <app-validation-message
                      [entityControl]="formControls.noiDungVuViec"
                      [validationMessages]="validationMessages.noiDungVuViec"
                    >
                    </app-validation-message>
                  </div>
                </div>
              </p-accordionTab>
              <!-- -------------------------------Thông tin thửa đất--------------------------------------------------- -->
              <p-accordionTab header="Thông tin thửa đất">
                <div class="grid">
                  <!-- ----------------------------soThua---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="soThua"
                        formControlName="soThua"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="soThua">Số thửa <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.soThua"
                      [validationMessages]="validationMessages.soThua"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------toBanDo---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="toBanDo"
                        formControlName="toBanDo"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="toBanDo">Tờ bản đồ <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.toBanDo"
                      [validationMessages]="validationMessages.toBanDo"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------dienTich---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <!-- <input
                        id="dienTich"
                        formControlName="dienTich"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      /> -->

                      <p-inputNumber
                        formControlName="dienTich"
                        class="w-full"
                        [style]="{ width: '100%' }"
                        mode="decimal"
                        [minFractionDigits]="2"
                      ></p-inputNumber>
                      <label>Diện tích (m2) <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.dienTich"
                      [validationMessages]="validationMessages.dienTich"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------loaiDat---------------------------=----------------------------- -->
                  <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="loaiDat"
                        formControlName="loaiDat"
                        [options]="landTypeOptions"
                        optionLabel="landTypeName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="landTypeName"
                        styleClass="w-full"
                      ></p-dropdown>
                      <label>Loại đất <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.loaiDat"
                      [validationMessages]="validationMessages.loaiDat"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------tinhThuaDat---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        name="tinhThuaDat"
                        formControlName="tinhThuaDat"
                        [options]="tinhOptions"
                        optionLabel="unitName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="unitName"
                        styleClass="w-full"
                        (onChange)="tinhChange($event?.value, 2)"
                        appendTo="body"
                      ></p-dropdown>
                      <label>Tỉnh/TP <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.tinhThuaDat"
                      [validationMessages]="validationMessages.tinhThuaDat"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------huyenThuaDat---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        [name]="huyenThuaDat"
                        formControlName="huyenThuaDat"
                        [options]="huyenThuaDatOptions"
                        optionLabel="unitName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="unitName"
                        styleClass="w-full"
                        appendTo="body"
                        (onChange)="huyenChange($event?.value, 2)"
                      ></p-dropdown>
                      <label>Quận/Huyện <span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.huyenThuaDat"
                      [validationMessages]="validationMessages.huyenThuaDat"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------xaThuaDat---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="xaThuaDat"
                        formControlName="xaThuaDat"
                        [options]="xaThuaDatOptions"
                        optionLabel="unitName"
                        optionValue="id"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        [filter]="true"
                        filterBy="unitName"
                        appendTo="body"
                        styleClass="w-full"
                      ></p-dropdown>
                      <label>Xã/Phường/TT<span class="required">*</span></label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.xaThuaDat"
                      [validationMessages]="validationMessages.xaThuaDat"
                    >
                    </app-validation-message>
                  </div>
                  <!-- ----------------------------diaChiThuaDat---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-12">
                    <span class="p-float-label">
                      <textarea
                        id="diaChiThuaDat"
                        formControlName="diaChiThuaDat"
                        [rows]="3"
                        pInputTextarea
                        class="w-full"
                      ></textarea>
                      <label for="diaChiThuaDat"
                        >Địa chỉ thửa đất <span class="required">*</span></label
                      >
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.diaChiThuaDat"
                      [validationMessages]="validationMessages.diaChiThuaDat"
                    >
                    </app-validation-message>
                  </div>
                </div>
              </p-accordionTab>
              <!-- -------------------------------Thông tin giải quyết--------------------------------------------------- -->
              <p-accordionTab header="Thông tin giải quyết Khiếu nại/Khiếu kiện">
                <div class="grid">
                  <div class="field col-12 md:col-12">
                    <h5 style="color: #29b6f6; padding: 3px; border-bottom: 3px solid #dee2e6">
                      <i class="pi pi-star-fill"></i> Thông tin giải quyết lần I
                    </h5>
                  </div>
                  <!-- ----------------------------loaiKhieuNai1---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="loaiKhieuNai1"
                        formControlName="loaiKhieuNai1"
                        [options]="loaiKhieuNaiOptions"
                        optionLabel="text"
                        optionValue="value"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        styleClass="w-full"
                      ></p-dropdown>
                      <label>Khiếu nại/Khiếu kiện</label>
                    </span>
                  </div>
                  <!-- ----------------------------ketQua1---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="ketQua1"
                        formControlName="ketQua1"
                        [options]="loaiKQOPtions"
                        optionLabel="text"
                        optionValue="value"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        styleClass="w-full"
                        scrollHeight="150px"
                      ></p-dropdown>
                      <label>Kết quả GQKN</label>
                    </span>
                  </div>
                  <!-- ---------------------------------ngayKhieuNai1------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="ngayKhieuNai1"
                        formControlName="ngayKhieuNai1"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                      ></p-calendar>
                      <label>Ngày QĐ GQKN</label>
                    </span>
                  </div>
                  <!-- ---------------------------------ngayTraKQ1------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="ngayTraKQ1"
                        formControlName="ngayTraKQ1"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                      ></p-calendar>
                      <label>Ngày trả kết quả</label>
                    </span>
                  </div>
                  <!-- -------------------------------thamQuyen1--------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="thamQuyen1"
                        formControlName="thamQuyen1"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="thamQuyen1">Thẩm quyền GQKN</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.thamQuyen1"
                      [validationMessages]="validationMessages.thamQuyen"
                    >
                    </app-validation-message>
                  </div>
                  <!-- -------------------------------soQD1--------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="soQD1"
                        formControlName="soQD1"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="soQD1">Số QĐ GQKN</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.soQD1"
                      [validationMessages]="validationMessages.soQD"
                    >
                    </app-validation-message>
                  </div>
                </div>

                <div class="grid">
                  <div class="field col-12 md:col-12">
                    <h5 style="color: #29b6f6; padding: 3px; border-bottom: 3px solid #dee2e6">
                      <i class="pi pi-star-fill"></i> Thông tin giải quyết lần II
                    </h5>
                  </div>
                  <!-- ----------------------------loaiKhieuNai2---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="loaiKhieuNai2"
                        formControlName="loaiKhieuNai2"
                        [options]="loaiKhieuNaiOptions"
                        optionLabel="text"
                        optionValue="value"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        styleClass="w-full"
                      ></p-dropdown>
                      <label>Khiếu nại/Khiếu kiện</label>
                    </span>
                  </div>
                  <!-- ----------------------------ketQua2---------------------------=----------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-dropdown
                        id="ketQua2"
                        formControlName="ketQua2"
                        [options]="loaiKQOPtions"
                        optionLabel="text"
                        optionValue="value"
                        [showClear]="true"
                        [autoDisplayFirst]="false"
                        styleClass="w-full"
                        scrollHeight="150px"
                      ></p-dropdown>
                      <label>Kết quả GQKN</label>
                    </span>
                  </div>
                  <!-- ---------------------------------ngayKhieuNai2------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="ngayKhieuNai2"
                        formControlName="ngayKhieuNai2"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                      ></p-calendar>
                      <label>Ngày QĐ GQKN</label>
                    </span>
                  </div>
                  <!-- ---------------------------------ngayTraKQ2------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <p-calendar
                        id="ngayTraKQ2"
                        formControlName="ngayTraKQ2"
                        appendTo="body"
                        dateFormat="dd/mm/yy"
                        [showClear]="true"
                      ></p-calendar>
                      <label>Ngày trả kết quả</label>
                    </span>
                  </div>
                  <!-- -------------------------------thamQuyen2--------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="thamQuyen2"
                        formControlName="thamQuyen2"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="thamQuyen2">Thẩm quyền GQKN</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.thamQuyen2"
                      [validationMessages]="validationMessages.thamQuyen"
                    >
                    </app-validation-message>
                  </div>
                  <!-- -------------------------------soQD2--------------------------------------------------- -->
                  <div class="field col-12 md:col-6">
                    <span class="p-float-label">
                      <input
                        id="soQD2"
                        formControlName="soQD2"
                        type="text"
                        pInputText
                        [style]="{ width: '100%' }"
                      />
                      <label for="soQD2">Số QĐ GQKN</label>
                    </span>
                    <app-validation-message
                      [entityControl]="formControls.soQD2"
                      [validationMessages]="validationMessages.soQD"
                    >
                    </app-validation-message>
                  </div>
                </div>
              </p-accordionTab>
            </p-accordion>
            <p-panel class="w-full" iconPos="start">
              <ng-template pTemplate="header">
                <span style="margin: 10px" class="font-semibold text-xl"
                  ><i class="pi pi-star"></i> Tình trạng xử lý</span
                >
              </ng-template>
              <div class="grid">
                <div class="field col-12 md:col-6">
                  <span class="p-float-label">
                    <p-dropdown
                      id="trangThai"
                      formControlName="trangThai"
                      [options]="trangThaiOPtions"
                      optionLabel="text"
                      optionValue="value"
                      [showClear]="true"
                      [autoDisplayFirst]="false"
                      styleClass="w-full"
                    ></p-dropdown>
                    <label>Trạng thái <span class="required">*</span></label>
                  </span>
                </div>
                <!-- ----------------------------boPhanDangXL---------------------------=----------------------------- -->
                <div class="field col-12 md:col-6">
                  <span class="p-float-label">
                    <input
                      id="boPhanDangXL"
                      formControlName="boPhanDangXL"
                      type="text"
                      pInputText
                      [style]="{ width: '100%' }"
                    />
                    <label for="boPhanDangXL"
                      >Bộ phận thực hiện <span class="required">*</span>
                    </label>
                  </span>
                  <app-validation-message
                    [entityControl]="formControls.boPhanDangXL"
                    [validationMessages]="validationMessages.boPhanDangXL"
                  >
                  </app-validation-message>
                </div>
                <!-- ------------------------------------------------------------------- -->
                <div
                  *ngIf="hasPermissionViewPrivateInfo"
                  class="field col-12 md:col-6 flex align-items-center"
                >
                  <p-inputSwitch formControlName="congKhai"></p-inputSwitch>
                  <label class="ml-3">Công khai</label>
                </div>
                <!-- ---------------------------------------------------------------- -->
                <div
                  *ngIf="hasPermissionViewPrivateInfo"
                  class="field col-12 md:col-6 flex align-items-center"
                >
                  <p-inputSwitch
                    formControlName="luuTru"
                    [disabled]="true"
                    readonly="true"
                  ></p-inputSwitch>
                  <label class="ml-3">{{ luuTru ? 'Đã khóa hồ sơ' : 'Hồ sơ chưa khóa' }}</label>
                </div>
                <!-- ----------------------------ghiChu---------------------------=----------------------------- -->
                <div *ngIf="hasPermissionViewPrivateInfo" class="field col-12 md:col-12">
                  <span class="p-float-label">
                    <textarea
                      id="ghiChu"
                      formControlName="ghiChu"
                      [rows]="4"
                      pInputTextarea
                      class="w-full"
                    ></textarea>
                    <label for="ghiChu" class="text-red-400">Ghi chú</label>
                  </span>
                  <app-validation-message
                    [entityControl]="formControls.ghiChu"
                    [validationMessages]="validationMessages.ghiChu"
                  >
                  </app-validation-message>
                </div>
              </div>
            </p-panel>
          </div>
        </ng-template>
      </p-tabPanel>
      <!-- ----------------------------------------------------------------------- -->
      <p-tabPanel>
        <ng-template pTemplate="header">
          <i class="pi pi-folder mr-2"></i>
          <span>Hồ sơ gắn kèm</span>
        </ng-template>

        <ng-template pTemplate="content">
          <app-file-attachment
            [loaiVuViec]="loaiVuViec"
            [modeHoSo]="mode"
            [idHoSo]="complainId"
          ></app-file-attachment>
        </ng-template>
      </p-tabPanel>
      <!-- ----------------------------------------------------------------------- -->
      <p-tabPanel>
        <ng-template pTemplate="header">
          <i class="pi pi-fw pi-directions mr-2"></i>
          <span>Dữ liệu không gian</span>
        </ng-template>
        <ng-template pTemplate="content">
          <p-card header="Dữ liệu không gian" class="w-full" *ngIf="mode != 'view'">
            <div class="grid">
              <!-- -------------------------------duLieuToaDo--------------------------------------------------- -->
              <div *ngIf="hasPermissionViewPrivateInfo" class="field grid col-12 md:col-12">
                <div class="field col-10 md:col-10">
                  <span class="p-float-label">
                    <input
                      id="duLieuToaDo"
                      formControlName="duLieuToaDo"
                      type="text"
                      pInputText
                      [style]="{ width: '100%' }"
                    />
                    <label for="duLieuToaDo">Dữ liệu tọa độ</label>
                  </span>
                  <app-validation-message
                    [entityControl]="formControls.duLieuToaDo"
                    [validationMessages]="validationMessages.duLieuToaDo"
                  >
                  </app-validation-message>
                </div>
                <!-- -------------------------------getCoordiate--------------------------------------------------- -->
                <div class="field col-2 md:col-2">
                  <button
                    *ngIf="mode != 'view'"
                    pButton
                    pRipples
                    type="button"
                    (click)="getCoordiate()"
                    label="{{ coordinateLabel }}"
                    class="p-button-info mr-2"
                    icon="pi pi-map-marker"
                  ></button>
                </div>
              </div>
              <!-- -------------------------------duLieuHinhHoc--------------------------------------------------- -->
              <div *ngIf="hasPermissionViewPrivateInfo" class="field grid col-12 md:col-12">
                <div class="field col-10 md:col-10">
                  <span class="p-float-label">
                    <textarea
                      id="duLieuHinhHoc"
                      formControlName="duLieuHinhHoc"
                      [rows]="5"
                      pInputTextarea
                      class="w-full"
                    ></textarea>
                    <label for="duLieuHinhHoc">Dữ liệu hình học</label>
                  </span>
                  <app-validation-message
                    [entityControl]="formControls.duLieuHinhHoc"
                    [validationMessages]="validationMessages.duLieuHinhHoc"
                  >
                  </app-validation-message>
                </div>
                <!-- -------------------------------getDraw--------------------------------------------------- -->
                <div class="field col-2 md:col-2">
                  <button
                    *ngIf="mode != 'view'"
                    pButton
                    pRipples
                    type="button"
                    (click)="getDraw()"
                    label="{{ drawLabel }}"
                    class="p-button-info mr-2"
                    icon="pi pi-map-marker"
                  ></button>
                </div>
              </div>
              <!-- ---------------------------------------------------------------- -->
            </div>
          </p-card>
          <p-card>
            <!-- -------------------------------Bản đồ--------------------------------------------------- -->
            <app-map [data]="dataMap" [duLieuToaDo]="toado"></app-map>
          </p-card>
        </ng-template>
      </p-tabPanel>
    </p-tabView>

    <ng-container>
      <ng-template pTemplate="footer">
        <div class="flex justify-content-end">
          <button
            *ngIf="mode != 'view'"
            pButton
            pRipples
            type="button"
            (click)="saveChange()"
            label="Lưu"
            class="p-button-info mr-2"
            icon="pi pi-check"
          ></button>
          <button
            *ngIf="showBtnLuuTru"
            pButton
            pRipples
            type="button"
            (click)="Lock()"
            label="Khóa hồ sơ"
            class="p-button-info mr-2"
            icon="pi pi-check"
          ></button>
          <button
            *ngIf="luuTru"
            pButton
            pRipples
            type="button"
            (click)="UnLock()"
            label="Mở Khóa"
            class="p-button-info mr-2"
            icon="pi pi-check"
          ></button>
          <button
            pButton
            pRipples
            type="button"
            (click)="close()"
            label="Đóng"
            class="p-button-danger"
            icon="pi pi-times"
          ></button>
        </div>
      </ng-template>
    </ng-container>
  </p-panel>
</form>
